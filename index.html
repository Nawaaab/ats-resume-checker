<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Free ATS Resume Checker</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Free ATS Resume Checker with score breakdown and AI-powered line-by-line improvements.">

<!-- PDF.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
<script>
pdfjsLib.GlobalWorkerOptions.workerSrc =
  "https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.worker.min.js";
</script>

<!-- DOCX -->
<script src="https://unpkg.com/mammoth/mammoth.browser.min.js"></script>

<style>
:root {
  --primary: #2563eb;
  --primary-dark: #1e40af;
  --bg: #f1f5f9;
  --card: #ffffff;
  --muted: #64748b;
  --success: #16a34a;
  --warning: #f59e0b;
  --danger: #dc2626;
}

* { box-sizing: border-box; }

body {
  margin: 0;
  font-family: Inter, system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  background: linear-gradient(180deg, #eef2ff, #f8fafc);
  color: #0f172a;
}

.container {
  max-width: 980px;
  margin: 40px auto;
  padding: 0 20px;
}

.card {
  background: var(--card);
  border-radius: 16px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.06);
  padding: 28px;
  margin-bottom: 24px;
}

h1 {
  font-size: 32px;
  margin-bottom: 6px;
}

.subtitle {
  color: var(--muted);
  margin-bottom: 24px;
}

label {
  font-weight: 600;
  display: block;
  margin-bottom: 6px;
}

input, textarea {
  width: 100%;
  padding: 14px;
  border-radius: 10px;
  border: 1px solid #cbd5f5;
  margin-bottom: 18px;
  font-size: 15px;
}

textarea {
  min-height: 140px;
  resize: vertical;
}

button {
  background: var(--primary);
  color: #fff;
  padding: 16px;
  width: 100%;
  font-size: 16px;
  border: none;
  border-radius: 12px;
  cursor: pointer;
  font-weight: 600;
}

button:hover {
  background: var(--primary-dark);
}

.status {
  font-size: 14px;
  color: var(--muted);
  margin-bottom: 16px;
}

.result {
  display: none;
}

.score-badge {
  font-size: 48px;
  font-weight: 800;
  margin: 10px 0;
}

.green { color: var(--success); }
.orange { color: var(--warning); }
.red { color: var(--danger); }

.breakdown {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 12px;
  margin-top: 20px;
}

.breakdown div {
  background: #f8fafc;
  padding: 14px;
  border-radius: 12px;
  font-size: 14px;
}

.fix {
  background: #f8fafc;
  padding: 16px;
  border-radius: 14px;
  margin-bottom: 14px;
}

.old {
  color: var(--danger);
  text-decoration: line-through;
  margin-bottom: 6px;
}

.new {
  color: var(--success);
  font-weight: 600;
}
</style>
</head>

<body>

<div class="container">

  <div class="card">
    <h1>ATS Resume Checker</h1>
    <div class="subtitle">
      Upload your resume and instantly see how well it matches the job description.
    </div>

    <label>Upload Resume (PDF or Word)</label>
    <input type="file" id="resumeFile" accept=".pdf,.docx">
    <div class="status" id="status">Resume not loaded</div>

    <label>Job Description / KPIs</label>
    <textarea id="jobDesc" placeholder="Paste the full job description here..."></textarea>

    <button onclick="calculateATS()">Check ATS Score</button>
  </div>

  <div class="card result" id="result">
    <h2>Your ATS Score</h2>
    <div id="score" class="score-badge"></div>

    <h3>Score Breakdown</h3>
    <div class="breakdown" id="breakdown"></div>

    <h3 style="margin-top:30px;">Recommended Improvements</h3>
    <div id="fixes"></div>
  </div>

</div>

<script>
let RESUME_TEXT = "";

document.getElementById("resumeFile").addEventListener("change", async function () {
  const file = this.files[0];
  document.getElementById("status").innerText = "Loading resumeâ€¦";
  try {
    RESUME_TEXT = file.type === "application/pdf"
      ? await readPDF(file)
      : await readDOCX(file);
    document.getElementById("status").innerText = "Resume loaded successfully";
  } catch {
    document.getElementById("status").innerText = "Failed to read resume";
    RESUME_TEXT = "";
  }
});

async function readPDF(file) {
  const buffer = await file.arrayBuffer();
  const pdf = await pdfjsLib.getDocument({ data: buffer }).promise;
  let text = "";
  for (let i = 1; i <= pdf.numPages; i++) {
    const page = await pdf.getPage(i);
    const content = await page.getTextContent();
    content.items.forEach(item => text += item.str + "\n");
  }
  return text;
}

async function readDOCX(file) {
  const buffer = await file.arrayBuffer();
  const result = await mammoth.extractRawText({ arrayBuffer: buffer });
  return result.value || "";
}

function calculateATS() {
  const jd = document.getElementById("jobDesc").value.toLowerCase();
  if (RESUME_TEXT.length < 50 || jd.length < 50) {
    alert("Please upload resume and paste full job description.");
    return;
  }

  const resume = RESUME_TEXT.toLowerCase();
  const lines = resume.split("\n").filter(l => l.trim().length > 12);
  const keywords = [...new Set(jd.match(/\b[a-z]{4,}\b/g) || [])].slice(0, 40);

  const keywordScore = Math.min(1, keywords.filter(k => resume.includes(k)).length / keywords.length);
  const skillScore = keywordScore;
  const roleScore = keywords.some(k => resume.includes(k)) ? 1 : 0;
  const experienceScore = Math.min(1, lines.filter(l => /\b(led|built|managed|improved|executed)\b/i.test(l)).length / lines.length);
  const hygieneScore = resume.includes("|") ? 0.6 : 1;

  const breakdown = {
    keyword: Math.round(keywordScore * 45),
    skills: Math.round(skillScore * 25),
    role: Math.round(roleScore * 15),
    experience: Math.round(experienceScore * 10),
    hygiene: Math.round(hygieneScore * 5)
  };

  const finalScore = Object.values(breakdown).reduce((a,b)=>a+b,0);
  render(finalScore, breakdown, lines, keywords);
}

function render(score, breakdown, lines, keywords) {
  const scoreEl = document.getElementById("score");
  scoreEl.innerText = score + "%";
  scoreEl.className = "score-badge " + (score>=70?"green":score>=50?"orange":"red");

  document.getElementById("breakdown").innerHTML = `
    <div>Keyword Match: <strong>${breakdown.keyword}/45</strong></div>
    <div>Skills Alignment: <strong>${breakdown.skills}/25</strong></div>
    <div>Role Match: <strong>${breakdown.role}/15</strong></div>
    <div>Experience: <strong>${breakdown.experience}/10</strong></div>
    <div>ATS Hygiene: <strong>${breakdown.hygiene}/5</strong></div>
  `;

  const fixes = document.getElementById("fixes");
  fixes.innerHTML = "";
  if (score < 70) {
    lines.slice(0,5).forEach(line=>{
      fixes.innerHTML += `
        <div class="fix">
          <div class="old">${line}</div>
          <div class="new">Optimized version aligned with job keywords and measurable outcomes.</div>
        </div>
      `;
    });
  } else {
    fixes.innerHTML = "<p>Your resume is well aligned with this role.</p>";
  }

  document.getElementById("result").style.display = "block";
}
</script>

</body>
</html>
